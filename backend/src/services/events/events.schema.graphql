type Query {
  events: [Event!]!
  event(id: ID!, versionId: ID): Event
}

type Event implements Versionable {
  _id: ID!
  _versionId: String
  _versionNumber: String
  _updatedAt: String!
  accessControl: EventAccessControl!
  versionHistory: VersionHistory!
  name: String!
  beginDate: String!
  endDate: String!
  program: EventProgramSettings!
  workshops: [Workshop!]!
}

type EventAccessControl {
  viewers: [String!]!
  editors: [String!]!
  owners: [String!]!
}

type EventProgramSettings {
  dateTime: String!
  introductions: Introductions!
  danceSets: [DanceSet!]!
  slideStyleId: ID
  pauseBetweenDances: Float!
  defaultIntervalMusic: DefaultIntervalMusic!
}

type DefaultIntervalMusic {
  name: String
  description: String
  showInLists: Boolean!
}

type Introductions {
  title: String!
  titleSlideStyleId: ID
  program: [EventProgramRow!]!
}

type DanceSet {
  _id: ID!
  title: String!
  titleSlideStyleId: ID
  program: [EventProgramRow!]!
  intervalMusic: IntervalMusic
}

type EventProgramRow {
  _id: ID!
  slideStyleId: ID
  type: EventProgramRowType!
  danceId: ID
  dance: Dance
  eventProgram: EventProgram
}

enum EventProgramRowType {
  RequestedDance
  Dance
  EventProgram
}

type EventProgram {
  name: String! 
  nameInLists: String
  description: String
  duration: Float
  showInLists: Boolean!
}

type IntervalMusic {
  name: String
  description: String
  duration: Float!
  slideStyleId: ID
  danceId: ID
  dance: Dance
  showInLists: Boolean!
}

type Mutation {
  createEvent(event: EventInput!): Event!
  patchEvent(id: ID!, event: JSONPatch!): Event!
  patchEventProgram(id: ID!, program: JSONPatch!): Event!
  deleteEvent(id: ID!): Event!
}

input EventInput {
  name: String!
  beginDate: String!
  endDate: String!
  accessControl: EventAccessControlInput
}

input EventAccessControlInput {
  viewers: [String!]!
}
